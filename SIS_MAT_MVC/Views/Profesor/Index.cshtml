@model IEnumerable<SIS_MAT_MVC.ProxyProfesor.ProfesorDC>

@{
	ViewBag.Title = "Index";
}

<header class="p-4">
	<h2>Profesores</h2>
	@Html.ActionLink("Crear nuevo profesor", "Create", null, new { @class = "btn btn-primary text-white text-decoration-none" })
</header>
<div class="table-container">
	<div class="table-view px-4">
		<table class="table">
			<tr>
				<th width="100">
					@Html.DisplayNameFor(model => model.Foto_profe)
				</th>
				<th width="120">
					@Html.DisplayNameFor(model => model.Nom_profe)
				</th>
				<th width="120">
					@Html.DisplayNameFor(model => model.Ape_profe)
				</th>
				<th width="150">
					@Html.DisplayNameFor(model => model.Departamento)
				</th>
				<th width="200">
					@Html.DisplayNameFor(model => model.Des_esp)
				</th>
				<th width="150">
					@Html.DisplayNameFor(model => model.Distrito)
				</th>
				<th width="150">
					@Html.DisplayNameFor(model => model.Dni_profe)
				</th>
				<th width="290">
					@Html.DisplayNameFor(model => model.Email_profe)
				</th>
				<th width="120">
					@Html.DisplayNameFor(model => model.Estado)
				</th>
				<th width="120">
					@Html.DisplayNameFor(model => model.Provincia)
				</th>
				<th width="120">
					@Html.DisplayNameFor(model => model.Sexo)
				</th>
				<th width="150">
					@Html.DisplayNameFor(model => model.Tel_profe)
				</th>
				<th width="200"></th>
			</tr>

			@foreach (var item in Model)
			{
				<tr>
					<td>
						@if (item.Foto_profe != null)
						{
							<img width="40" height="40" src="data:image/jpeg;base64,@(Convert.ToBase64String(item.Foto_profe))" alt="Imagen">
						}
						else
						{
							<span>-</span>
						}
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Nom_profe)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Ape_profe)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Departamento)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Des_esp)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Distrito)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Dni_profe)
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Email_profe)
					</td>
					<td>
						@if (item.Estado == "Activo")
						{
							<span class="badge text-bg-primary">Activo</span>
						}
						else
						{
							<span class="badge text-bg-secondary">@Html.DisplayFor(modelItem => item.Estado)</span>
						}
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Provincia)
					</td>
					<td>
						@if (item.Sexo == "M")
						{
							<span>Masculino</span>
						}
						else
						{
							<span>Femenino</span>
						}
					</td>
					<td>
						@Html.DisplayFor(modelItem => item.Tel_profe)
					</td>
					<td>
						@Html.ActionLink("Edit", "Edit", new { id = item.Id_profe }) |
						@Html.ActionLink("Details", "Details", new { id = item.Id_profe }) |
						<a href="javascript:void(0);" onclick="deleteProfe('@item.Id_profe')">Delete</a>
					</td>
				</tr>
			}

		</table>
	</div>
</div>
<script>
    function deleteProfe(id) {
        if (confirm('¿Estás seguro de que deseas eliminar este profesor?')) {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = '@Url.Action("Delete", "Profesor")/' + id;
            document.body.appendChild(form);
            form.submit();
        }
    }
</script>
